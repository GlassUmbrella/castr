<% include ../partials/header %>

<script>
	function sendInvite(id) {
		$.post("/admin/send-invite", { id: id }).done(function(data) {
			alert("Data Loaded: " + data);
		});
	}
</script>

<table class="table table-bordered">
	<thead>
		<tr>
			<th>Name</th>
			<th>Email address</th>
			<th>Invite code</th>
			<th>Requested</th>
			<th>Last sent</th>
			<th>Activated</th>
			<th></th>
		</tr>
	</thead>
	<%if (invites.length > 0) { %>
		<tbody>
			<% invites.forEach(function(invite){ %>
			<tr>
				<td><%= invite.name %></td>
				<td><%= invite.emailAddress %></td>
				<td><%= invite.inviteCode %></td>
				<td><%= invite.dateRequested %></td>
				<td>
					<% if(invite.dateSent != null) { %>
						<%= invite.dateSent %>
					<% } else { %>
						<span class="fui-cross"></span>
					<% } %>
				</td>
				<td>
					<% if(invite.dateActivated != null) { %>
						<%= invite.dateActivated %>
					<% } else { %>
						<span class="fui-cross"></span>
					<% } %>
				</td>
				<td>
					<% if(invite.createdUserId != null) { %>
						<span class="fui-user"></span>
					<% } else { %>
						<a href="javascript:sendInvite(<%= invite.id %>)"><span class="fui-mail"></span></a>
					<% } %>
				</td>
			</tr>
			<% }); %>
		</tbody>
	<% } else { %>
		<tbody>
			<td colspan="4">No invites</td>
		</tbody>
	<% } %>
</table>

<% include ../partials/footer %>